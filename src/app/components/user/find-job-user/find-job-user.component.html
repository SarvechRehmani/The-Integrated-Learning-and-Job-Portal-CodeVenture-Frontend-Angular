<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <!-- Hero Section -->
  <div class="mb-12 relative overflow-hidden rounded-2xl">
    <div
      class="absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10"
    ></div>
    <div class="relative z-9 p-8 md:p-12 text-center">
      <h1 class="text-4xl sm:text-5xl font-bold mb-4 tracking-tight">
        <span
          class="bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400"
        >
          Find Your Dream Job
        </span>
      </h1>
      <p class="text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto">
        Discover opportunities that match your skills and ambitions
      </p>
    </div>
  </div>

  <!-- Modern Search Section with Advanced Filters -->
  <div class="mb-10">
    <!-- Main Search Bar -->
    <div class="relative z-9">
      <!-- Glass morphism container -->
      <div
        class="bg-white/80 dark:bg-gray-800/80 backdrop-blur-lg rounded-2xl shadow-xl border border-gray-200/30 dark:border-gray-700/30 p-1 transition-all duration-300 hover:shadow-2xl"
      >
        <div class="flex flex-col md:flex-row gap-1">
          <!-- Search Input with Icon -->
          <div class="flex-1 flex items-center px-4 py-2">
            <mat-icon class="text-gray-500 dark:text-gray-400 mr-3"
              >search</mat-icon
            >
            <input
              [(ngModel)]="searchQuery"
              (keyup.enter)="searchJobs()"
              name="searchQuery"
              placeholder="Job title, company, or keywords"
              class="w-full bg-transparent border-0 focus:ring-0 text-gray-800 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 text-lg outline-none"
            />
            <button
              *ngIf="searchQuery"
              (click)="searchQuery = ''"
              class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 ml-2"
            >
              <mat-icon>close</mat-icon>
            </button>
          </div>

          <!-- Location Input -->
          <div
            class="flex-1 flex items-center px-4 py-2 border-l border-gray-200/50 dark:border-gray-700/50"
          >
            <mat-icon class="text-gray-500 dark:text-gray-400 mr-3"
              >location_on</mat-icon
            >
            <input
              [(ngModel)]="locationQuery"
              placeholder="Location (city, country)"
              class="w-full bg-transparent border-0 focus:ring-0 text-gray-800 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 outline-none"
            />
          </div>

          <!-- Search Button -->
          <button
            (click)="searchJobs()"
            class="!bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 text-white !rounded-xl !font-medium !px-8 !py-3 !shadow-lg hover:!shadow-xl transition-all duration-300 flex items-center justify-center gap-2 min-w-[180px]"
          >
            <mat-icon>search</mat-icon>
            <span>Find Jobs</span>
          </button>
        </div>
      </div>

      <!-- Advanced Filters (Collapsible) -->
      <div class="mt-4 px-2">
        <button
          (click)="showAdvancedFilters = !showAdvancedFilters"
          class="text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 text-sm font-medium flex items-center gap-1"
        >
          <mat-icon class="text-base">{{
            showAdvancedFilters ? "expand_less" : "expand_more"
          }}</mat-icon>
          Advanced filters
        </button>

        <div
          *ngIf="showAdvancedFilters"
          class="mt-3 p-4 bg-white dark:bg-gray-800 rounded-2xl shadow-md border border-gray-200 dark:border-gray-700 transition-all duration-300 hover:shadow-xl hover:border-blue-400 dark:hover:border-blue-500 hover:-translate-y-1"
        >
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <!-- Job Type -->
            <mat-form-field appearance="outline" class="w-full">
              <mat-label class="text-gray-700 dark:text-gray-300"
                >Job Type</mat-label
              >
              <mat-select [(value)]="selectedJobType" multiple>
                <mat-option value="fulltime">Full-time</mat-option>
                <mat-option value="parttime">Part-time</mat-option>
                <mat-option value="contract">Contract</mat-option>
                <mat-option value="internship">Internship</mat-option>
                <mat-option value="remote">Remote</mat-option>
              </mat-select>
            </mat-form-field>

            <!-- Experience Level -->
            <mat-form-field appearance="outline" class="w-full">
              <mat-label class="text-gray-700 dark:text-gray-300"
                >Experience Level</mat-label
              >
              <mat-select [(value)]="selectedExperience" multiple>
                <mat-option value="entry">Entry Level</mat-option>
                <mat-option value="mid">Mid Level</mat-option>
                <mat-option value="senior">Senior</mat-option>
                <mat-option value="lead">Lead</mat-option>
              </mat-select>
            </mat-form-field>

            <!-- Salary Range -->
            <mat-form-field appearance="outline" class="w-full">
              <mat-label class="text-gray-700 dark:text-gray-300"
                >Salary Range</mat-label
              >
              <mat-select [(value)]="salaryRange" class="dark:text-gray-200">
                <mat-option value="any">Any</mat-option>
                <mat-option value="50k">$50k+</mat-option>
                <mat-option value="100k">$100k+</mat-option>
                <mat-option value="150k">$150k+</mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="flex justify-end mt-4 gap-3">
            <button
              (click)="resetFilters()"
              class="!border !border-gray-300 dark:!border-gray-600 !text-gray-700 dark:!text-gray-300 !rounded-lg !px-4 !py-2 text-sm"
            >
              Reset
            </button>
            <button
              (click)="applyFilters()"
              class="!bg-blue-600 hover:!bg-blue-700 !text-white !rounded-lg !px-4 !py-2 text-sm"
            >
              Apply Filters
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Active Filters (when applied) -->
    <div
      *ngIf="activeFilters.length > 0"
      class="mt-3 flex flex-wrap gap-2 px-2"
    >
      <div
        *ngFor="let filter of activeFilters"
        class="flex items-center bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 px-3 py-1 rounded-full text-sm"
      >
        {{ filter }}
        <button
          (click)="removeFilter(filter)"
          class="ml-1 text-blue-600 dark:text-blue-300 hover:text-blue-800 dark:hover:text-blue-100"
        >
          <mat-icon class="!text-sm">close</mat-icon>
        </button>
      </div>
    </div>
  </div>
  <!-- Filter & Results Bar -->
  <div
    class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4"
  >
    <div class="text-lg text-gray-700 dark:text-gray-300">
      Showing
      <span class="font-bold text-blue-600 dark:text-blue-400">{{
        filteredJobs.length
      }}</span>
      results
    </div>
  </div>

  <!-- Jobs Grid - Modern Card Layout -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-10">
    <div
      *ngFor="let j of filteredJobs"
      class="group relative bg-white dark:bg-gray-800 rounded-2xl shadow-md border border-gray-200 dark:border-gray-700 p-6 transition-all duration-300 hover:shadow-xl hover:border-blue-400 dark:hover:border-blue-500 hover:-translate-y-1"
    >
      <!-- Job Header -->
      <div class="flex flex-col md:flex-row md:justify-between gap-4 mb-4">
        <div class="flex gap-3">
          <div
            class="w-12 h-12 rounded-lg bg-white dark:bg-gray-900 shadow-md border border-gray-200 dark:border-gray-600 flex items-center justify-center"
          >
            <mat-icon class="text-blue-600 dark:text-blue-400"
              >business</mat-icon
            >
          </div>
          <div>
            <h2
              class="text-xl z-9 font-bold text-gray-800 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors"
            >
              {{ j.jTitle }}
            </h2>
            <p class="text-blue-600 dark:text-blue-400">
              {{ j.company?.name || "Company Name" }}
            </p>
          </div>
        </div>
        <div class="flex items-start gap-2">
          <span
            class="px-2 py-1 rounded-md text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"
          >
            {{ j.jType || "Full-time" }}
          </span>
          <span
            class="px-2 py-1 rounded-md text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"
          >
            {{ j.jLocation || "Remote" }}
          </span>
        </div>
      </div>

      <!-- Job Description -->
      <p class="text-gray-600 dark:text-gray-300 mb-5 line-clamp-2">
        {{ j.jDescription }}
      </p>

      <!-- Skills Tags -->
      <div class="flex flex-wrap gap-2 mb-6">
        <span
          *ngFor="let skill of j.jSkills.split(',').slice(0, 3)"
          class="px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"
        >
          {{ skill.trim() }}
        </span>
        <span
          *ngIf="j.jSkills.split(',').length > 3"
          class="px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"
        >
          +{{ j.jSkills.split(",").length - 3 }} more
        </span>
      </div>

      <!-- Job Footer -->
      <div
        class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4"
      >
        <div
          class="flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400"
        >
          <mat-icon class="text-sm">schedule</mat-icon>
          <span>Posted {{ j.postedDate | date : "mediumDate" }}</span>
        </div>
        <button
          [routerLink]="'/user/viewjob/' + j.jId"
          class="w-full md:w-auto !bg-gradient-to-r from-purple-600 to-purple-500 hover:from-purple-700 hover:to-purple-600 text-white !rounded-lg !font-medium !px-6 !py-2 !shadow hover:!shadow-md transition-all duration-300 flex justify-around items-center gap-1"
        >
          <span>View Details</span>
          <i class="fa-solid fa-arrow-right"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- No Results State -->
  <div *ngIf="filteredJobs.length === 0" class="text-center py-16">
    <div class="max-w-md mx-auto">
      <div
        class="w-20 h-20 mx-auto mb-6 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center"
      >
        <mat-icon class="text-blue-600 dark:text-blue-400 text-4xl"
          >search_off</mat-icon
        >
      </div>
      <h3 class="text-xl font-medium text-gray-800 dark:text-white mb-3">
        No jobs found
      </h3>
      <p class="text-gray-600 dark:text-gray-400 mb-6">
        Try adjusting your search or filters to find what you're looking for
      </p>
      <button
        (click)="clearSearch()"
        class="!bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 text-white !rounded-xl !font-medium !px-6 !py-3 !shadow-lg hover:!shadow-xl transition-all duration-300 inline-flex items-center gap-2"
      >
        <mat-icon>refresh</mat-icon>
        Reset Search
      </button>
    </div>
  </div>

  <!-- Load More Button -->
  <div
    *ngIf="filteredJobs.length > 0 && filteredJobs.length < jobs.length"
    class="text-center mt-8"
  >
    <button
      (click)="loadMoreJobs()"
      class="!bg-transparent hover:!bg-gray-100 dark:hover:!bg-gray-700 !text-blue-600 dark:!text-blue-400 !border !border-blue-500 dark:!border-blue-400 !rounded-xl !font-medium !px-8 !py-3 transition-all duration-300 inline-flex items-center gap-2"
    >
      <span>Load More Jobs</span>
      <mat-icon>expand_more</mat-icon>
    </button>
  </div>
</div>
