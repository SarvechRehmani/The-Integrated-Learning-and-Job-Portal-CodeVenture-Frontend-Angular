<!-- Ultra-Modern Card with Floating Action Button -->
<div class="relative">
  <!-- Modern Glassmorphism Hero Header -->
  <div class="mb-10 relative">
    <div
      class="absolute -inset-4 bg-gradient-to-r from-blue-600/20 to-cyan-600/20 dark:from-blue-900/30 dark:to-cyan-900/30 rounded-2xl blur-md opacity-75"
    ></div>
    <div
      class="relative bg-white/80 dark:bg-gray-900/80 backdrop-blur-lg rounded-2xl border border-white/30 dark:border-gray-700/50 shadow-lg overflow-hidden"
    >
      <div class="px-10 py-12 text-center">
        <h1
          class="text-4xl md:text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-cyan-600 dark:from-blue-400 dark:to-cyan-400 mb-4 leading-tight"
        >
          User Management Dashboard
        </h1>
        <p class="text-lg text-gray-600 dark:text-gray-300 max-w-3xl mx-auto">
          Manage all registered users with advanced controls and real-time
          updates
        </p>
      </div>
    </div>
  </div>
  <!-- Glassmorphism Card -->
  <div
    class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 shadow-blue-100/50 dark:shadow-gray-700 overflow-hidden transition-all duration-300 hover:shadow-lg hover:shadow-blue-200/30 dark:hover:shadow-gray-800/30 hover:border-blue-300 dark:hover:border-blue-500"
  >
    <!-- Card Header with Glowing Stats -->
    <div
      class="border-b border-gray-200/50 dark:border-gray-700/30 px-6 py-5 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"
    >
      <div>
        <h2
          class="text-2xl font-bold text-gray-900 dark:text-white bg-gradient-to-r from-blue-600 to-cyan-500 bg-clip-text text-transparent"
        >
          User Management
        </h2>
        <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
          Manage your organization's members and permissions
        </p>
      </div>
      <div class="flex flex-wrap gap-3">
        <div
          class="relative p-1 rounded-xl bg-gradient-to-r from-blue-500 to-cyan-500"
        >
          <div
            class="px-4 py-2.5 rounded-lg bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm"
          >
            <span
              class="block text-xl font-bold text-gray-900 dark:text-white"
              >{{ users.length }}</span
            >
            <span class="text-xs font-medium text-blue-600 dark:text-blue-400"
              >ACTIVE USERS</span
            >
          </div>
          <div
            class="absolute -top-1 -right-1 w-3 h-3 bg-blue-400 rounded-full animate-pulse"
          ></div>
        </div>

        <div
          class="relative p-1 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500"
        >
          <div
            class="px-4 py-2.5 rounded-lg bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm"
          >
            <span class="block text-xl font-bold text-gray-900 dark:text-white"
              >0</span
            >
            <span
              class="text-xs font-medium text-purple-600 dark:text-purple-400"
              >INACTIVE</span
            >
          </div>
        </div>
      </div>
    </div>

    <!-- Advanced Search and Action Bar -->
    <div
      class="px-6 py-4 bg-gray-50/50 dark:bg-gray-800/30 border-b border-gray-200/50 dark:border-gray-700/30 flex flex-col md:flex-row gap-4 items-start md:items-center"
    >
      <div class="relative flex-1 min-w-[250px]">
        <div
          class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400 dark:text-gray-500"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-5 w-5"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
            />
          </svg>
        </div>
        <input
          type="text"
          (keydown)="searchUsers($event)"
          [(ngModel)]="searchQuery"
          class="block w-full pl-10 pr-4 py-2.5 ring-2 bg-white/80 dark:bg-gray-800/80 rounded-xl shadow-sm focus:ring-3 focus:ring-blue-500 dark:focus:ring-cyan-500 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 transition-all duration-200"
          placeholder="Search users, emails, roles..."
        />
      </div>

      <div class="flex flex-wrap gap-2 w-full md:w-auto">
        <button
          (click)="searchUsers($event)"
          class="px-4 py-2.5 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white font-medium rounded-xl shadow-sm flex items-center gap-2 transition-all duration-200 hover:shadow-md ml-auto"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-5 w-5"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
            />
          </svg>
          Search
        </button>
      </div>
    </div>

    <!-- Modern Table with Hover Effects -->
    <div class="overflow-x-auto">
      <table
        class="min-w-full divide-y divide-gray-200/50 dark:divide-gray-700/30"
      >
        <thead class="bg-gray-100/50 dark:bg-gray-800/30 backdrop-blur-sm">
          <tr>
            <th
              scope="col"
              class="px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"
            >
              <div class="flex items-center gap-1 cursor-pointer group">
                <span>User Profile</span>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-4 w-4 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-colors"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"
                  />
                </svg>
              </div>
            </th>
            <th
              scope="col"
              class="px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"
            >
              Contact Information
            </th>
            <th
              scope="col"
              class="px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"
            >
              Role & Expertise
            </th>
            <th
              scope="col"
              class="px-6 py-4 text-right text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"
            >
              Actions
            </th>
          </tr>
        </thead>
        <tbody
          class="bg-white/30 dark:bg-gray-900/20 divide-y divide-gray-200/50 dark:divide-gray-700/30"
        >
          <tr
            *ngFor="let user of filteredUsers"
            class="hover:bg-gray-50/70 dark:hover:bg-gray-800/40 transition-all duration-200"
          >
            <td class="px-6 py-5 whitespace-nowrap">
              <div class="flex items-center gap-4">
                <div class="relative">
                  <div
                    class="absolute -inset-1 rounded-full bg-gradient-to-r from-blue-500 to-cyan-500 opacity-20 blur-sm group-hover:opacity-30 transition-opacity duration-300"
                  ></div>
                  <div
                    class="relative h-11 w-11 overflow-hidden rounded-full bg-white dark:bg-gray-800 border-2 border-white dark:border-gray-700 shadow-sm flex items-center justify-center"
                  >
                    <img
                      *ngIf="user.profile"
                      [src]="
                        'http://localhost:9191/file/profile/' + user.profile
                      "
                      class="h-full w-full object-cover"
                      alt="User profile"
                    />
                    <div
                      *ngIf="!user.profile"
                      class="h-full w-full bg-gradient-to-br from-blue-100 to-cyan-100 dark:from-blue-900/50 dark:to-cyan-900/50 flex items-center justify-center"
                    >
                      <span
                        class="text-lg font-medium text-blue-600 dark:text-blue-400"
                        >{{ user.username?.slice(0, 1) | uppercase }}</span
                      >
                    </div>
                  </div>
                </div>
                <div>
                  <div
                    class="font-semibold text-gray-900 dark:text-white flex items-center gap-2"
                  >
                    {{ user.firstName }} {{ user.lastName }}
                    <span
                      class="text-xs px-2 py-0.5 rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400"
                      >Active</span
                    >
                  </div>
                  <div class="text-sm text-gray-500 dark:text-gray-400">
                    {{ user.username }}
                  </div>
                </div>
              </div>
            </td>
            <td class="px-6 py-5 whitespace-nowrap">
              <div class="text-sm text-gray-900 dark:text-white">
                {{ user.email }}
              </div>
              <div
                class="text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1 mt-1"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-4 w-4"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
                  />
                </svg>
                {{ user.phone || "Not provided" }}
              </div>
            </td>
            <td class="px-6 py-5 whitespace-nowrap">
              <div class="flex flex-wrap gap-2">
                <span
                  class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"
                  [ngClass]="{
                    'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300':
                      user.field === 'frontend',
                    'bg-cyan-100 text-cyan-800 dark:bg-cyan-900/30 dark:text-cyan-300':
                      user.field === 'backend',
                    'bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300':
                      user.field === 'design',
                    'bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-300':
                      user.field === 'devops'
                  }"
                >
                  <span
                    class="w-2 h-2 rounded-full mr-1.5"
                    [ngClass]="{
                      'bg-blue-500': user.field === 'frontend',
                      'bg-cyan-500': user.field === 'backend',
                      'bg-purple-500': user.field === 'design',
                      'bg-emerald-500': user.field === 'devops'
                    }"
                  ></span>
                  {{ user.field | uppercase }}
                </span>
                <span
                  class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"
                >
                  <span class="w-2 h-2 rounded-full mr-1.5 bg-gray-500"></span>
                  MEMBER
                </span>
              </div>
            </td>
            <td
              class="px-6 py-5 whitespace-nowrap text-right text-sm font-medium"
            >
              <div class="flex justify-end gap-1">
                <button
                  class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700/50 text-gray-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
                    />
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"
                    />
                  </svg>
                </button>

                <button
                  (click)="deleteUser(user.id)"
                  class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700/50 text-gray-500 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                    />
                  </svg>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Empty State with Modern Illustration -->
    <div *ngIf="users.length === 0" class="text-center py-16 px-6">
      <div class="mx-auto max-w-md">
        <svg
          class="w-full h-48 text-gray-300 dark:text-gray-700"
          viewBox="0 0 512 384"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M437.016 74.984C388.668 26.636 324.38 0 256 0C187.62 0 123.332 26.636 74.984 74.984C26.636 123.332 0 187.62 0 256C0 324.38 26.636 388.668 74.984 437.016C123.332 485.364 187.62 512 256 512C324.38 512 388.668 485.364 437.016 437.016C485.364 388.668 512 324.38 512 256C512 187.62 485.364 123.332 437.016 74.984ZM256 480C132.288 480 32 379.712 32 256C32 132.288 132.288 32 256 32C379.712 32 480 132.288 480 256C480 379.712 379.712 480 256 480Z"
            fill="currentColor"
            fill-opacity="0.2"
          />
          <path
            d="M256 128C220.7 128 192 156.7 192 192C192 227.3 220.7 256 256 256C291.3 256 320 227.3 320 192C320 156.7 291.3 128 256 128ZM256 224C238.3 224 224 209.7 224 192C224 174.3 238.3 160 256 160C273.7 160 288 174.3 288 192C288 209.7 273.7 224 256 224Z"
            fill="currentColor"
            fill-opacity="0.4"
          />
          <path
            d="M256 288C203.1 288 160 331.1 160 384H352C352 331.1 308.9 288 256 288Z"
            fill="currentColor"
            fill-opacity="0.4"
          />
        </svg>
      </div>
      <h3 class="text-2xl font-bold text-gray-900 dark:text-white mt-8 mb-3">
        No users found
      </h3>
      <p class="text-gray-500 dark:text-gray-400 max-w-md mx-auto mb-8">
        Your organization doesn't have any members yet. Start by inviting your
        team members.
      </p>
    </div>

    <!-- Modern Pagination -->
    <div
      class="px-6 py-4 border-t border-gray-200/50 dark:border-gray-700/30 flex flex-col sm:flex-row items-center justify-between gap-4 bg-gray-50/50 dark:bg-gray-800/30 backdrop-blur-sm"
      *ngIf="users.length > 0"
    >
      <div class="text-sm text-gray-500 dark:text-gray-400">
        Showing
        <span class="font-semibold text-gray-700 dark:text-gray-300">{{
          (currentPage - 1) * pageSize + 1
        }}</span>
        to
        <span class="font-semibold text-gray-700 dark:text-gray-300">{{
          getMin(currentPage * pageSize, filteredUsers.length)
        }}</span>
        of
        <span class="font-semibold text-gray-700 dark:text-gray-300">{{
          filteredUsers.length
        }}</span>
        results
      </div>

      <div class="flex items-center gap-2">
        <button
          (click)="previousPage()"
          [disabled]="currentPage === 1"
          class="px-3.5 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 transition-colors duration-200 flex items-center gap-1"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-4 w-4"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M15 19l-7-7 7-7"
            />
          </svg>
          Previous
        </button>

        <div class="flex items-center gap-1">
          <button
            *ngFor="let page of getPageNumbers()"
            (click)="goToPage(page)"
            class="w-10 h-10 rounded-lg"
            [class.bg-blue-600]="page === currentPage"
            [class.text-white]="page === currentPage"
            [class.font-medium]="page === currentPage"
            [class.text-gray-700]="page !== currentPage"
            [class.dark:text-gray-300]="page !== currentPage"
            [class.hover:bg-gray-100]="page !== currentPage"
            [class.dark:hover:bg-gray-700]="page !== currentPage"
          >
            {{ page }}
          </button>
        </div>

        <button
          (click)="nextPage()"
          [disabled]="currentPage * pageSize >= filteredUsers.length"
          class="px-3.5 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 transition-colors duration-200 flex items-center gap-1"
        >
          Next
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-4 w-4"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M9 5l7 7-7 7"
            />
          </svg>
        </button>
      </div>
    </div>
  </div>
</div>
